{"version":3,"file":"batcher.js","sourceRoot":"","sources":["../src/batcher.ts"],"names":[],"mappings":"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"}